{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(articles) {\n  return articles.map(el => {\n    return `\n  <li class=\"gallery-item\">\n   <a href=\"${el.largeImageURL}\">\n   <img src=\"${el.webformatURL}\"\n        loading=\"lazy\"\n        alt=\"${el.tags}\"\n            >\n       <ul class=\"gallery__description-list gallery-description-list\">\n         <li class=\"gallery-description-list__item\">\n           <h3>Likes</h3>\n           <p>${el.likes}</p>\n         </li>\n         <li class=\"gallery-description-list__item\">\n           <h3>Views</h3>\n           <p>${el.views}</p>\n         </li>\n         <li class=\"gallery-description-list__item\">\n           <h3>Comments</h3>\n           <p>${el.comments}</p>\n         </li>\n         <li class=\"gallery-description-list__item\">\n           <h3>Downloads</h3>\n           <p>${el.downloads}</p>\n         </li>\n       </ul>\n       </a>\n  </li>`;\n  })\n    .join('');\n}\n\nexport class Loader {\n  static spinner = document.querySelector('.loader-backdrop');\n\n  static show() {\n    Loader.spinner.classList.remove('hidden');\n  }\n\n  static hide() {\n    Loader.spinner.classList.add('hidden');\n  }\n}\n\nexport class LoadMore {\n  static button = document.querySelector('button[data-load=\"load-more\"]');\n\n  constructor() {\n  }\n\n static show() {\n    LoadMore.button.classList.remove('hidden');\n  }\n\n static hide() {\n    LoadMore.button.classList.add('hidden');\n  }\n\n  static disabled() {\n    LoadMore.button.disabled = true;\n    LoadMore.button.classList.add('load-more_disabled');\n  }\n  static activate() {\n    LoadMore.button.classList.remove('load-more_disabled');\n    LoadMore.button.disabled = false;\n  }\n}","import { Loader } from './render-functions.js';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '41512134-7ce1694d07a59eb7d39c787c8';\n\nexport class PixabayApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async fetchArticles() {\n    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${this.searchQuery}&image_type=photo&orientation=horisontal&safesearch=true&per_page=15&page=${this.page}`;\n    try {\n      const responce = await axios.get(url);\n      this.increasePage();\n      return responce.data;\n    }\n    catch (error) {\n      iziToast.show({\n        message: error.message,\n        backgroundColor: '#fc3d03',\n        messageColor: '#fff',\n        close: false,\n        progressBarColor: '#fff',\n        position: 'topRight',\n        timeout: 1000,\n      });\n    }\n  }\n\n  increasePage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n}","import { PixabayApiService } from './js/pixabay-api.js';\nimport { createMarkup, Loader, LoadMore } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('.js-form'),\n  gallery: document.querySelector('.js-gallery'),\n  loadMoreBtn: document.querySelector('button[data-load=\"load-more\"]'),\n};\n\nconst pixabayApiService = new PixabayApiService();\n\nrefs.searchForm.addEventListener('submit', handleSubmitForm);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore);\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nasync function handleSubmitForm(event) {\n  event.preventDefault();\n  let inputValue = event.target.elements.query.value.trim();\n  Loader.show();\n  //Validate input\n  if (inputValue === '') {\n    iziToast.show({\n      message: 'Поле не может быть пустым',\n      backgroundColor: '#fc3d03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n    return;\n  }\n  if (inputValue.length > 100) {\n    iziToast.show({\n      message: 'Поле не может быть больше 100 символов',\n      backgroundColor: '#fc3d03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n  }\n  //End Validate\n\n  inputValue = inputValue.split(' ')\n    .join('+');\n  pixabayApiService.query = inputValue;\n  pixabayApiService.resetPage();\n  refs.gallery.innerHTML = '';\n  const articles = await pixabayApiService.fetchArticles();\n  if (!articles.hits.length) {\n    iziToast.show({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#fc3d03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n  } else {\n    Loader.hide();\n    LoadMore.show();\n    refs.gallery.insertAdjacentHTML('afterbegin', createMarkup(articles.hits));\n    gallery.refresh();\n  }\n}\n\nasync function handleLoadMore() {\n  Loader.show();\n  LoadMore.disabled();\n  const articles = await pixabayApiService.fetchArticles();\n  if (articles.hits.length === 0) {\n    Loader.hide();\n    LoadMore.hide();\n    iziToast.show({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#fc3d03',\n      messageColor: '#fff',\n      close: false,\n      progressBarColor: '#fff',\n      position: 'topRight',\n      timeout: 1000,\n    });\n    return;\n  }\n\n  refs.gallery.insertAdjacentHTML('beforeend', createMarkup(articles.hits));\n  gallery.refresh();\n  Loader.hide()\n  LoadMore.activate();\n}\n"],"names":["createMarkup","articles","el","_Loader","__publicField","Loader","_LoadMore","LoadMore","API_KEY","PixabayApiService","url","responce","axios","error","iziToast","newQuery","refs","pixabayApiService","handleSubmitForm","handleLoadMore","gallery","SimpleLightbox","event","inputValue"],"mappings":"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"}